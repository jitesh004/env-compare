<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparison Report</title>
    <style>
        /* Base styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            font-size: 13px;
        }

        /* Tab styling */
        .tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 20px;
            border: none;
            background: #e0e0e0;
            cursor: pointer;
            font-weight: bold;
        }

        .tab-button.active {
            background: #fff;
            border-bottom: 3px solid #2196F3;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 4px;
        }

        .tab-content.active {
            display: block;
        }

        /* Accordion styling */
        .accordion {
            margin-bottom: 10px;
        }

        .accordion-header {
            background: #f8f9fa;
            padding: 15px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-weight: bold;
        }

        .accordion-content {
            display: none;
            padding: 15px;
            border: 1px solid #ddd;
            border-top: none;
        }

        .accordion-content.show {
            display: block;
        }

        /* Stats/Legend styling */
        .comparison-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            border: 2px solid transparent;
            background: #f8f9fa;
        }

        .stat-item:hover {
            background: #e9ecef;
        }

        .stat-item.selected {
            border-color: #2196F3;
            background: #e3f2fd;
        }

        .stat-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .equal-dot { background-color: #4caf50; }
        .undefined-dot { background-color: #ffc107; }
        .red-dot { background-color: #f44336; }
        .blue-dot { background-color: #2196F3; }

        /* Table styling */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #f8f9fa;
            font-weight: bold;
        }

        tr.equal { background-color: rgba(76, 175, 80, 0.1); }
        tr.red { background-color: rgba(244, 67, 54, 0.1); }
        tr.blue { background-color: rgba(33, 150, 243, 0.1); }
        tr.yellow { background-color: rgba(255, 193, 7, 0.1); }

        tr.hidden {
            display: none;
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="summary-section">
            {summary}
        </div>

        <div class="tabs" id="comparisonTabs">
            {tabs}
        </div>

        <div class="tab-content-container">
            {body}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            function activateTab(tabId) {
                // Deactivate all tabs
                tabs.forEach(tab => tab.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                // Activate selected tab
                const selectedTab = document.querySelector(`[data-tab="${tabId}"]`);
                const selectedContent = document.getElementById(tabId);
                if (selectedTab && selectedContent) {
                    selectedTab.classList.add('active');
                    selectedContent.classList.add('active');
                }
            }

            // Initialize tabs
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    activateTab(tabId);
                });
            });

            // Activate first tab
            if (tabs.length > 0) {
                const firstTabId = tabs[0].getAttribute('data-tab');
                activateTab(firstTabId);
            }

            // Accordion functionality
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    content.classList.toggle('show');
                });
            });

            // Filtering functionality
            document.querySelectorAll('.comparison-stats').forEach(statsContainer => {
                const tableBody = statsContainer.closest('.accordion-content').querySelector('tbody');
                const statItems = statsContainer.querySelectorAll('.stat-item');
                let selectedFilters = new Set();

                statItems.forEach(item => {
                    item.addEventListener('click', () => {
                        item.classList.toggle('selected');
                        const filterClass = item.getAttribute('data-filter');

                        if (item.classList.contains('selected')) {
                            selectedFilters.add(filterClass);
                        } else {
                            selectedFilters.delete(filterClass);
                        }

                        const rows = tableBody.querySelectorAll('tr');
                        rows.forEach(row => {
                            if (selectedFilters.size === 0) {
                                row.classList.remove('hidden');
                            } else {
                                if (selectedFilters.has(row.classList[0])) {
                                    row.classList.remove('hidden');
                                } else {
                                    row.classList.add('hidden');
                                }
                            }
                        });
                    });
                });
            });
        });
    </script>
</body>
</html>